<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/layout/index :: dynamic(~{::main})}">
<body>
<main>
    <br>
    <div class="container mt-4"></div>
    <hr>
    <form th:action="@{/cart/success}" method="post" onsubmit="return validateForm();">
        <div class="row">
            <div class="col-md-8">
                <div class="p-2" style="background-color: #e9ecef;">
                    <h4 class="fw-bold mt-2">THÔNG TIN GIAO HÀNG</h4>
                </div>
                <div class="row">
                    <input class="m-3 col-md-10 p-2" placeholder="Họ Tên" type="text" id="name" required name="name">
                    <input class="m-3 col-md-10 p-2" placeholder="Số điện thoại" type="tel" id="phone" required pattern="[0-9]{10}" name="phone">
                    <input class="m-3 col-md-10 p-2" placeholder="Email" type="email" id="email" required name="email">
                    <input class="m-3 col-md-10 p-2" placeholder="Địa chỉ" type="text" id="address" required name="address">
                    <select class="m-3 col-md-10 p-2" id="city" required name="city">
                        <option value="">Tỉnh/Thành Phố</option>
                    </select>
                    <div class="col-md-10 m-1 mt-3" id="district" required>
                        <select class="col-md-5 p-2" name="district">
                            <option>Quận/Huyện</option>
                        </select>
                        <select class="col-md-5 float-end p-2" id="ward" required name="ward">
                            <option>Phường/Xã</option>
                        </select>
                        <div class="form-check mt-4">
                            <input class="form-check-input" type="checkbox" id="flexCheckDefault" name="subscribe">
                            <label class="form-check-label" for="flexCheckDefault">
                                Cập nhật các thông tin mới nhất về chương trình từ Sports
                            </label>
                        </div>
                    </div>
                    <div class="row m-1">
                        <div class="p-2 mt-2" style="background-color: #e9ecef;">
                            <h4 class="fw-bold mt-2">PHƯƠNG THỨC THANH TOÁN</h4>
                        </div>
                        <div th:each="payment : ${payments}" class="form-check mt-4">
                            <input type="radio" class="form-check-input" th:id="${'payment' + payment.id}" name="paymentMethod" th:value="${payment.id}" th:checked="${payment.paymethod == 'Thanh toán trực tiếp khi giao hàng'}">
                            <label class="form-check-label" th:for="${'payment' + payment.id}" th:text="${payment.paymethod}"></label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cart Summary -->
            <div class="col-md-4" style="background-color: #e9ecef;">
                <div class="cart-summary p-2">
                    <h4 class="fw-bold mt-2">ĐƠN HÀNG</h4>
                    <hr style="border-top: 1px dashed #ccc;">
                    <div ng-repeat="item in cart.items">
                        <div class="d-flex position-relative">
                            <h5 class="fw-bold text-secondary fs-6 w-100" style="max-width: 250px;">{{item.name}}</h5>
                            <p class="text-secondary position-absolute bottom-5 end-0 ">{{item.price | number:3}} VNĐ</p>
                        </div>
                        <div class="d-flex text-secondary">
                            <div class="mt-1">
                                <label class="form-label fw-bold">Size: </label>
                                <span>{{item.size}}</span>
                            </div>
                            <div class="m-1" style="position: relative; bottom: 6px; left: 10px;">
                                <label for="quantity" class="form-label fw-bold text-secondary">x</label>
                                <input type="text" ng-model="item.qty" min="1" class="form-control d-inline-block text-secondary" style="width: 70px; border: none;" readonly>
                            </div>
                        </div>
                        <hr style="border-top: 1px dashed #ccc;">
                    </div>
                    <div>
                        <p>Đơn hàng: <span class="float-end">{{cart.amount | number:3}} VNĐ</span></p>
                        <p><strong>Số lượng: <span class="float-end">{{cart.count}}</span></strong></p>
                        <p><strong>TỔNG CỘNG: <span class="float-end fw-bold" style="color: orange;">{{cart.amount | number:3}} VNĐ</span></strong></p>
                    </div>
                    <button class="btn btn-warning w-100 mt-3 fw-bold text-light p-4 fs-4" type="submit" style="background: #f60;">HOÀN TẤT ĐẶT HÀNG</button>
                </div>
            </div>
        </div>
    </form>
    <br>
    <script src="/js/validation.js"></script>
</main>
</body>
</html>
